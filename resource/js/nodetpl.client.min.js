/*!
 * nodetpl v3.3.2
 * Best javascript template engine
 * https://www.nodetpl.com
 *
 * Copyright 2012-2015 pillys@163.com
 * Released under the MIT license
 */
(function(b,c){if(typeof define==="function"&&define.amd){define(c);
}else{if(typeof define==="function"&&define.cmd){define(c);}else{if(typeof exports==="object"){module.exports=c();}else{b.nodetpl=c();}}}}(this,function(d,c,e){var f;
if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};}function b(){this.version="3.3.2";this.ie6=window.VBArray&&!window.XMLHttpRequest;
this.guid=function(){return"NTGUID__"+(this.guid._counter++).toString(36);};this.duid=function(){return"NTDUID__"+(this.duid._counter++).toString(36);};
this.guid._counter=1;this.duid._counter=1;this._data={};this._tpls={};this._cache={};this._docid="_tpl_";this.options={base:"",openTag:"<?",closeTag:"?>"};
return this;}b.prototype.config=function(g){if(g){this._extend(this.options,g);return this;}else{return this.options;}};b.prototype._extend=function(k,g){var j=Object.prototype.hasOwnProperty;
g=g||{};for(var h in g){if(!j.call(g,h)){continue;}k[h]=g[h];}return k;};b.prototype._split=function(p,n,l){if(Object.prototype.toString.call(n)!=="[object RegExp]"){return p.split(n,l);
}var j=[],g=0,k=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.sticky?"y":""),n=RegExp(n.source,k+"g"),i=/()??/.exec("")[1]===undefined,h,m,o,q;p=p+"";if(!i){h=RegExp("^"+n.source+"$(?!\\s)",k);
}if(l===undefined||+l<0){l=Infinity;}else{l=Math.floor(+l);if(!l){return[];}}while(m=n.exec(p)){o=m.index+m[0].length;if(o>g){j.push(p.slice(g,m.index));
if(!i&&m.length>1){m[0].replace(h,function(){for(var r=1;r<arguments.length-2;r++){if(arguments[r]===undefined){m[r]=undefined;}}});}if(m.length>1&&m.index<p.length){Array.prototype.push.apply(j,m.slice(1));
}q=m[0].length;g=o;if(j.length>=l){break;}}if(n.lastIndex===m.index){n.lastIndex++;}}if(g===p.length){if(q||!n.test("")){j.push("");}}else{j.push(p.slice(g));
}return j.length>l?j.slice(0,l):j;};b.prototype._getCurrentScript=function(){var n=document,k,h;if(n.currentScript){return n.currentScript.src;}var g;try{a.b.c();
}catch(m){g=m.stack;if(!g&&window.opera){g=(String(m).match(/of linked script \S+/g)||[]).join(" ");}}if(g){g=g.replace(/(at Global code \([^\)]+\))[\s\S]*/i,"$1");
g=g.split(/[@ ]/g).pop();g=g[0]=="("?g.slice(1,-1):g;return g.replace(/(:\d+)?:\d+$/i,"");}k=n.head||n.getElementsByTagName("head")[0];h=k.getElementsByTagName("script");
for(var j=0,l;l=h[j++];){if(l.readyState==="interactive"){return l.className=l.src;}}};b.prototype._fixcss=function(g){var h=document.getElementById("nodetpl_css");
if(!h){h=document.createElement("style");h.setAttribute("type","text/css");h.setAttribute("id","nodetpl_css");document.getElementsByTagName("head")[0].appendChild(h);
}if(h.styleSheet){h.styleSheet.cssText+=g;}else{h.appendChild(document.createTextNode(g));}};b.prototype.css=function(g){if(!g){return"";}if(this.ie6){var h=document.getElementById("nodetpl_css");
if(!h){h=document.createElement("style");h.setAttribute("type","text/css");h.setAttribute("id","nodetpl_css");document.getElementsByTagName("head")[0].appendChild(h);
}if(h.styleSheet){h.styleSheet.cssText+=g;}else{h.appendChild(document.createTextNode(g));}return"";}else{return"<style>"+g+"</style>\n";}};b.prototype._template=function(i){var g,j={},h=/<template(.*name=['"]([^'"]+)*)?\b[^>]*>([^<]*(?:(?!<\/template>)<[^<]*)*)<\/template>/igm;
while(g=h.exec(i)){if(g[2]){j[g[2]]=g[3];}}j.main=j.main||i;return j;};b.prototype.render=function(i,j,l){var k,g;if(typeof i!=="string"){throw new TypeError();
}k=this._docid+Math.random().toString();if(typeof window!=="undefined"){(new Function(this.compile(k,i)))();}else{var h=new vm.createContext({console:console,require:d,exports:{},module:{uri:k}});
new vm.Script(that.compile(filepath,content)).runInContext(h);}return this._getJs(k,j,l);};b.prototype.exec=function(h){var g,i=/<script\b[^>]*>([^<]*(?:(?!<\/script>)<[^<]*)*)<\/script>/igm;
while(g=i.exec(h)){(new Function(g[1]))();}return this;};b.prototype._load=function(g,j){var h=this,i=document.createElement("script");i.type="text/javascript";
if(i.readyState){i.onreadystatechange=function(){if(h.ie6&&!this.getAttribute("initialized")){document.getElementsByTagName("head")[0].appendChild(i);this.setAttribute("initialized",true);
}if(this.readyState=="loaded"||this.readyState=="complete"){this.onreadystatechange=null;j&&j.call(h);}};i.src=g;!this.ie6&&document.getElementsByTagName("head")[0].appendChild(i);
}else{i.src=g;i.onload=function(){j&&j.call(h);};document.getElementsByTagName("head")[0].appendChild(i);}return this;};b.prototype._ajax=function(h){var g;
h=this._extend({type:"get",async:true,data:"",success:function(j){}},h);try{g=new XMLHttpRequest();}catch(i){try{g=new ActiveXObject("Msxml2.XMLHTTP");
}catch(i){try{g=new ActiveXObject("Microsoft.XMLHTTP");}catch(i){return false;}}}g.onreadystatechange=function(){if(g.readyState==4&&g.status==200){h.success.call(g,g.responseText);
}};g.open(h.type,h.url,h.async);g.send(h.data);return this;};b.prototype.get=function(g,i,j){var h=this;if(/\/[^\/\.]+$|\.js$/.test(g.replace(/(\?#).*$/,""))){h._getJs(g,i,j);
}else{if(typeof i==="function"){j=i;i=null;}h._ajax({url:g,type:"get",success:function(k){h.render(k,i,j);}});}};b.prototype._getUrl=function(g){g=g.trim();
if(g.indexOf(this._docid)!==0){if(typeof location!=="undefined"){if(!/^(https?:|\/{2})/.test(g)){g=this.options.base+g;}if(/^\/[^\/]/.test(g)){g="//"+location.host+g;
}if(/^\/{2}/.test(g)){g=location.protocol+g;}if(!/\.js$/.test(g)){g=g+".js";}}}return g;};b.prototype._getJs=function(g,l,p){var n=this,o,h,m,j=n._cache,k=n._tpls,i=n._data;
g=n._getUrl(g);if(l===false){o={render:function(q){return k[g].main(q||{});},toString:function(){return j[g]?j[g].html:this;}};}if(typeof l==="function"){p=l;
l={};}m=function(q){if(typeof p!=="function"){return false;}if(l===false){p.call(n,o);}else{p(q.main(l));}};h=function(){if(typeof p!=="function"){return false;
}if(l===false){p.call(n,o);}else{p.call(n,k[g].main(l));}};if(typeof define==="function"){if(define.amd&&typeof d==="function"){d([g],m);}else{if(define.cmd&&typeof seajs==="object"){seajs.use([g],m);
}}}else{if(g.indexOf(n._docid)===0||typeof k[g]==="object"&&typeof k[g].main==="function"){h();}else{n._load(g,function(){if(typeof k[g]==="object"&&typeof k[g].main==="function"){h();
}});}}};b.prototype._fetch=function(j){var l=this,m,n="",q="",k="",g={};var i=Object.prototype.hasOwnProperty,h=/<script\b[^>]*>([^<]*(?:(?!<\/script>)<[^<]*)*)<\/script>/igm,o=/<style\b[^>]*>([^<]*(?:(?!<\/style>)<[^<]*)*)<\/style>/igm;
m=this._template(j);for(var p in m){if(!i.call(m,p)){continue;}k="";q="";n=m[p];if(!n){continue;}n=n.replace(o,function(s,r){return k+="\n"+r,"";}).replace(h,function(s,r){return q+="\n"+r,"";
});g[p]={css:l._css(k.trim(),p),html:l._html(n.trim(),p),js:l._js(q.trim(),p)};}return g;};b.prototype._css=function(h,g){if(h){h=h.replace(/'/g,"\\'").replace(/\/\*(.|\n)*?\*\/|\r?\n/ig,"").replace(/([a-zA-Z0-9_\-#*\.:\s,\(\)'"<>=]*)(\{)/ig,function(l,k,o){var j;
if(g==="main"){j="guid";}else{j="guid + duid";}k=k.trim();if(k===""){return"#' + "+j+" + '"+o;}else{var m=k.split(",");for(var n=0;n<m.length;n++){m[n]=m[n].trim();
m[n]="\\n#' + "+j+" + '"+(m[n].indexOf(":")===0?"":" ")+m[n];}return m.join(",")+o;}});if(h!==""){h="    css += '"+h+"';";}}return h;};b.prototype._js=function(k,g){var j;
if(k){j=this._split(k,/\r?\n/g);for(var h=0;h<j.length;h++){if(!j[h]){continue;}j[h]="    _ += '"+j[h].replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\r\n/g,"\n").replace(/\n/g,"\\n").replace(/(^|[^\.])include\(([^\)]*)\)/ig,function(l,i,n){var m=(n||"").split(",");
m.map(function(p,o){m[o]=m[o].trim();});return i+"$TPLS["+m[0]+"]("+(m.length>1?m[1]:"$DATA")+", guid)";})+"\\n';\n";}k=j.join("");}return k;};b.prototype._html=function(n,q){var k=this,j,p,o,g,l,m;
if(n){m=function(i){return i.replace(/([\$\(\)\*\+\.\[\]\?\\\^\{\}\|])/g,"\\$1");};g=m(k.options.openTag);l=m(k.options.closeTag);j=this._split(n,new RegExp("("+g+"[\\s\\S]*?"+l+")"));
for(var h=0;h<j.length;h++){if(!j[h]){continue;}o=new RegExp(g+"([\\s\\S]*?)"+l,"igm");if(o.test(j[h])){j[h]=j[h].replace(o,"$1");j[h]=j[h].replace(/@([a-zA-Z\$_]+)/igm,"$DATA.$1");
j[h]=j[h].replace(/print\((.*?)\);/igm,"    template.push(($1) || '');\n");if(j[h].indexOf("=")===0){j[h]=j[h].substring(1).trim();if(!/^\d/.test(j[h])){p=(/^(\(*)([a-zA-Z\d_\$\s\.]+)/.exec(j[h])||[0,0,""])[2];
if(p!==""){j[h]="    if (typeof "+p+' !== "undefined") {\n      _ += ('+j[h]+");\n    }\n";}else{j[h]="    _ += ("+j[h]+");\n";}}else{j[h]="    _ += ("+j[h]+");\n";
}}}else{j[h]="\n    _ += '"+j[h].replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\r\n/g,"\n").replace(/\n/g,"\\n")+"';\n";}}n=j.join("");n=n.replace(/\$ROOT/igm,"'+ guid +'");
n=n.replace(/\$SUBROOT/igm,"'+ guid + duid +'");}n="try{\nwith($DATA || {}){\n"+n+"\n}} catch(e){ console.log(e.stack); }\n";return n;};b.prototype.compile=function(h,g){if(typeof h!=="string"||typeof g!=="string"){throw new TypeError();
}return this._compile(h,this._fetch(g));};b.prototype._compile=function(n,h){var g,k="",m=[],l=Object.prototype.hasOwnProperty;for(var j in h){if(!l.call(h,j)){continue;
}g="";g+='  "'+j+'": function($DATA, guid){\n';g+="    var _ = '';\n";g+="    var css = '';\n";g+="    var duid = nodetpl.duid();\n";g+="    guid = guid || nodetpl.guid();\n";
if(h[j].css){g+=h[j].css+"\n";g+="    _ += nodetpl.css(css);";}if(h[j].html){g+=h[j].html;}if(h[j].js){g+="    _ += '\\n<script>\\n';\n";g+="    _ += '(function(window, document, undefined){\\n';\n";
g+="    _ += '  var _module_id = Math.random().toString();\\n';\n";g+="    _ += '  var _factory = function(require, exports, module){\\n';\n";g+="    _ += '    var nodetpl = typeof require === \\'function\\' ? require(\\'nodetpl\\') : window.nodetpl;\\n';\n";
g+="    _ += '    var ROOT, $ROOT, SUBROOT, $SUBROOT, $TPLS, $DATA;\\n';\n";g+="    _ += '    var guid = \\''+ guid + '\\', duid = \\''+ duid + '\\';\\n';\n";
g+="    _ += '    ROOT = document.getElementById(guid);\\n';\n";g+="    _ += '    SUBROOT = document.getElementById(guid + duid);\\n';\n";g+="    _ += '    $TPLS = nodetpl._tpls[\"'+ tpl_id +'\"];\\n';\n";
g+="    _ += '    $DATA = nodetpl._data[duid];\\n';\n";g+=h[j].js;g+="    _ += '  }\\n';\n";g+="    _ += '  if(typeof define === \\'function\\'){\\n';\n";
g+="    _ += '    define(_module_id, _factory);\\n';\n";g+="    _ += '    if (define.amd && typeof require === \\'function\\') {\\n';\n";g+="    _ += '      require([_module_id]);\\n';\n";
g+="    _ += '    } else if (define.cmd && typeof seajs === \\'object\\') {\\n';\n";g+="    _ += '      seajs.use([_module_id]);\\n';\n";g+="    _ += '    }\\n';\n";
g+="    _ += '  } else {\\n';\n";g+="    _ += '    _factory();\\n';\n";g+="    _ += '  }\\n';\n";g+="    _ += '})(window, document);';\n";g+="    _ += '<\/script>\\n';\n";
}g+="    $DATA && (nodetpl._data[duid] = $DATA);\n";g+="    return _;\n";g+="  }";m.push(g);}k+="(function(root, factory) {\n";k+=" if (typeof define === 'function') {\n";
if(n.indexOf(this._docid)===0){k+="   define('"+n+"', factory);\n";}else{k+="   define(factory);\n";}k+=" } else if (typeof require === 'function' && typeof exports === 'object') {\n";
k+="   factory(require, exports, module);\n";k+=" } else {\n";k+="   factory();\n";k+=" }\n";k+="}(this, function(require, exports, module) {\n";k+="  var nodetpl = typeof require === 'function' ? require('nodetpl') : window.nodetpl;\n";
if(n.indexOf(this._docid)===0){k+="  var tpl_id = '"+n+"';\n";}else{k+="  var tpl_id = module && module.uri ? module.uri : nodetpl._getCurrentScript();\n";
}k+="  nodetpl._tpls[tpl_id] = {\n";k+=m.join(",\n");k+="\n};\n";k+="  return nodetpl._tpls[tpl_id];\n";k+="}));";return k;};f=new b();return f;}));